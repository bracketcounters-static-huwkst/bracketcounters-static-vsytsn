class IndexedDBDatabase{constructor(t){this.database=t,this.objectStore=null}createObjectStore(t,e="id",n=!1,o,r=null){let s=indexedDB.open(this.database,1);return new Promise(function(c,a){s.onupgradeneeded=function(s){let a=s.target.result.createObjectStore(t,{keyPath:e,autoIncrement:n});null!=r&&a.createIndex(r,r),a.add(o),c(!0)},s.onerror=function(t){c(!1)}})}insertData(t){let e=indexedDB.open(this.database,1),n=this.objectStore;return new Promise(function(o,r){e.onsuccess=function(e){let r=e.target.result.transaction(n,"readwrite").objectStore(n).add(t);r.onsuccess=function(t){o(!0)},r.onerror=function(t){o(!1)}}})}readAll(){let t=this.objectStore,e=indexedDB.open(this.database,1),n=[];return new Promise(function(o,r){e.onsuccess=function(e){e.target.result.transaction(t).objectStore(t).openCursor().onsuccess=function(t){let e=t.target.result;e?(n.push(e.value),e.continue()):o(n)}}})}delete(t){let e=indexedDB.open(this.database,1),n=this.objectStore;return new Promise(function(o,r){e.onsuccess=function(e){let r=e.target.result.transaction(n,"readwrite").objectStore(n).delete(t);r.onsuccess=function(t){o(!0)},r.onerror=function(t){o(!1)}}})}read(t){let e=indexedDB.open(this.database,1),n=this.objectStore;return new Promise(function(o,r){e.onsuccess=function(e){let r=e.target.result.transaction(n,"readwrite").objectStore(n).get(t);r.onsuccess=function(t){o(t.target.result)},r.onerror=function(t){o(!1)}}})}update(t,e){let n=indexedDB.open(this.database,1),o=this.objectStore;return new Promise(function(r,s){n.onsuccess=function(n){let s=n.target.result.transaction(o,"readwrite").objectStore(o),c=s.get(t);c.onsuccess=function(t){let n=t.target.result;for(let o in e)n[o]=e[o];s.put(n).onsuccess=function(t){r(!0)},c.onerror=function(t){r(!1)}},c.onerror=function(t){r(!1)}}})}checkObjectStore(t){let e=indexedDB.open(this.database,1);return new Promise(function(n,o){e.onsuccess=function(e){e.target.result.objectStoreNames.contains(t)?n(!0):n(!1)}})}getKeyPath(){let t=indexedDB.open(this.database,1),e=this.objectStore;return new Promise(function(n,o){t.onsuccess=function(t){let o=t.target.result;o.objectStoreNames.contains(e)?n(o.transaction(e).objectStore(e).keyPath):n(!1)}})}deleteAllData(){let t=indexedDB.open(this.database,1),e=this.objectStore;return new Promise(function(n,o){t.onsuccess=function(t){let o=t.target.result;o.objectStoreNames.contains(e)?(o.transaction([e],"readwrite").objectStore(e).clear(),n(!0)):n(!1)}})}}
