class IndexedDBDatabase{constructor(t){this.database=t,this.objectStore=null}createObjectStore(t,e="id",n=!1,o,r=null){let c=indexedDB.open(this.database,1);return new Promise(function(s,u){c.onupgradeneeded=function(c){let u=c.target.result.createObjectStore(t,{keyPath:e,autoIncrement:n});null!=r&&u.createIndex(r,r),u.add(o),s(!0)},c.onerror=function(t){s(!1)}})}insertData(t){let e=indexedDB.open(this.database,1),n=this.objectStore;return new Promise(function(o,r){e.onsuccess=function(e){let r=e.target.result.transaction(n,"readwrite").objectStore(n).add(t);r.onsuccess=function(t){o(!0)},r.onerror=function(t){o(!1)}}})}readAll(){let t=this.objectStore,e=indexedDB.open(this.database,1),n=[];return new Promise(function(o,r){e.onsuccess=function(e){e.target.result.transaction(t).objectStore(t).openCursor().onsuccess=function(t){let e=t.target.result;e?(n.push(e.value),e.continue()):o(n)}}})}delete(t){let e=indexedDB.open(this.database,1),n=this.objectStore;return new Promise(function(o,r){e.onsuccess=function(e){let r=e.target.result.transaction(n,"readwrite").objectStore(n).delete(t);r.onsuccess=function(t){o(!0)},r.onerror=function(t){o(!1)}}})}read(t){let e=indexedDB.open(this.database,1),n=this.objectStore;return new Promise(function(o,r){e.onsuccess=function(e){let r=e.target.result.transaction(n,"readwrite").objectStore(n).get(t);r.onsuccess=function(t){o(t.target.result)},r.onerror=function(t){o(!1)}}})}update(t,e){let n=indexedDB.open(this.database,1),o=this.objectStore;return new Promise(function(r,c){n.onsuccess=function(n){let c=n.target.result.transaction(o,"readwrite").objectStore(o),s=c.get(t);s.onsuccess=function(t){let n=t.target.result;for(let o in e)n[o]=e[o];c.put(n).onsuccess=function(t){r(!0)},s.onerror=function(t){r(!1)}},s.onerror=function(t){r(!1)}}})}checkObjectStore(t){let e=indexedDB.open(this.database,1);return new Promise(function(n,o){e.onsuccess=function(e){e.target.result.objectStoreNames.contains(t)?n(!0):n(!1)}})}deleteObjectStore(t){let e=indexedDB.open(this.database,1);return new Promise(function(n,o){e.onsuccess=function(e){let o=e.target.result.deleteObjectStore(t);o.onsuccess=function(t){n(!0)},o.onerror=function(t){n(!0)}},e.onerror=function(t){n(!1)}})}}
